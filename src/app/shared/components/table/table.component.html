<table class="table" mat-table [dataSource]="dataSource" matSort>
  <ng-container *ngFor="let item of config.headers">
    <ng-container [matColumnDef]="item.value">
      <th
        class="table__cell table__cell_header"
        [class.table__cell_header-picker]="item.datePicker"
        mat-header-cell
        mat-sort-header
        [disabled]="item.sort ? null : ''"
        *matHeaderCellDef
      >
        <ng-container *ngIf="item.datePicker; else value">
          <input
            class="table__item table__item_input-date-picker"
            matInput
            [formControl]="item.inputControl"
            [matDatepicker]="datePicker"
            [min]="item.min"
            [max]="item.max"
            (dateChange)="onDateChange($event)"
            disabled
          />
          <mat-datepicker-toggle matSuffix [for]="datePicker"></mat-datepicker-toggle>
          <mat-datepicker #datePicker disabled="false"></mat-datepicker>
        </ng-container>

        <ng-template #value>
          {{ item.value | titlecase }}
        </ng-template>
      </th>

      <td
        mat-cell
        *matCellDef="let cell"
        [class.table__row_mark]="item.datePicker"
      >
        <span> {{ cell[item.value] }} </span>
      </td>
    </ng-container>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="columnHeaders"></tr>
  <tr mat-row *matRowDef="let row; columns: columnHeaders"></tr>
</table>
